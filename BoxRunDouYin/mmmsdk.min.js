"use strict";function _defineProperty(i,e,o){return e in i?Object.defineProperty(i,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[e]=o,i}function MMMSDK(){for(var i in this.appid="",this.pf="",this.domain="",this.openid="",this.session_key="",this.options=wx.getLaunchOptionsSync(),this.systeminfo=wx.getSystemInfoSync(),this.os=1,this.via="scene="+this.options.scene,-1!=this.systeminfo.system.indexOf("iOS")&&(this.os=2),this.options.query)this.via=this.via+"&"+i+"="+this.options.query[i]}MMMSDK.prototype.init=function(i,e,o){var t=this;this.appid=i,this.pf=e,this.domain=o,wx.onShow(function(i){if("{}"==JSON.stringify(t.options.query))for(var e in t.via="scene="+i.scene,i.query)t.via=t.via+"&"+e+"="+i.query[e]}),t.code2reg()},MMMSDK.prototype.report=function(i,e,o){var t;wx.request((_defineProperty(t={method:"POST",url:"https://report."+this.domain+".com/rpt/"+i,data:e,header:{"content-type":"application/json"}},"method","POST"),_defineProperty(t,"success",function(i){o(i)}),_defineProperty(t,"fail",function(e){console.log(i,"fail",e)}),t))},MMMSDK.prototype.code2reg=function(){var i=this;wx.login({success:function(e){if(e.code){var o={appid:i.appid,pf:i.pf,via:i.via,code:e.code,mobile:i.systeminfo.brand,mobiletype:i.systeminfo.model,os:i.os,version:i.systeminfo.version,system:i.systeminfo.system,platform:i.systeminfo.platform};i.report("code2reg",o,function(e){window.code=e.data.openid,i.openid=e.data.openid,i.session_key=e.data.session_key,console.log(e)})}}})},MMMSDK.prototype.regchar=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=this;if(""!=n.openid){var s={appid:n.appid,openid:n.openid,pf:n.pf,via:n.via,mobile:n.systeminfo.brand,mobiletype:n.systeminfo.model,os:n.os,zoneid:i,zonename:e,roleid:o,rolename:t};n.report("regchar",s,function(i){})}},MMMSDK.prototype.login=function(){var i=this;if(""!=i.openid){var e={appid:i.appid,openid:i.openid,pf:i.pf,via:i.via,mobile:i.systeminfo.brand,mobiletype:i.systeminfo.model,os:i.os};i.report("login",e,function(i){})}},wx.mmmsdk=new MMMSDK;